{% assign enable_disqus = false %}

{% if site.disqus.enabled and page.disqus == null %}
	{% assign enable_disqus = true %}
{% elsif site.disqus.enabled and page.disqus.enabled == null %}
	{% assign enable_disqus = true %}
{% elsif site.disqus.enabled and page.disqus.enabled %}
	{% assign enable_disqus = true %}
{% endif %}

{% if enable_disqus %}
    {% assign javascript_disqus_html = null %}
    {% capture javascript_disqus_html %}
    	<script type="text/javascript">
            var disqus_shortname = '{{ site.disqus.shortname }}';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
	   </script>
    {% endcapture %}
    {{ javascript_disqus_html | strip_newlines | remove:'   ' }}
{% endif %}